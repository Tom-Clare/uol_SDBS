CREATE DATABASE `sdbs`;

CREATE TABLE `driver` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`firstname` VARCHAR(50) NOT NULL,
	`lastname` VARCHAR(50) NOT NULL,
	PRIMARY KEY (`id`)
);

CREATE TABLE `vehicle` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`make` VARCHAR(100) NOT NULL,
	`model` VARCHAR(100) NOT NULL,
	PRIMARY KEY (`id`)
);

CREATE TABLE `parcel` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`shift_id` INT NOT NULL,
	`address_id` INT NOT NULL,
	PRIMARY KEY (`id`)
);

CREATE TABLE `shift` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`shift_type_id` INT NOT NULL,
	`driver_id` INT NOT NULL,
	`vehicle_id` INT NOT NULL,
	`date` DATE NOT NULL,
	PRIMARY KEY (`id`)
);

CREATE TABLE `shift_type` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`name` VARCHAR(50) NOT NULL UNIQUE,
	PRIMARY KEY (`id`)
);

CREATE TABLE `location` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`shift_id` INT NOT NULL,
	`time` TIMESTAMP NOT NULL,
	`latitude` FLOAT NOT NULL,
	`longitude` FLOAT NOT NULL,
	PRIMARY KEY (`id`)
);

CREATE TABLE `address` (
	`id` INT NOT NULL AUTO_INCREMENT,
	`line_1` VARCHAR(100) NOT NULL,
	`line_2` VARCHAR(100),
	`county` VARCHAR(100) NOT NULL,
	`country` VARCHAR(100) NOT NULL,
	`postcode` VARCHAR(15) NOT NULL,
	PRIMARY KEY (`id`)
);

ALTER TABLE `parcel` ADD CONSTRAINT `parcel_fk_shift` FOREIGN KEY (`shift_id`) REFERENCES `shift`(`id`);

ALTER TABLE `parcel` ADD CONSTRAINT `parcel_fk_address` FOREIGN KEY (`address_id`) REFERENCES `address`(`id`);

ALTER TABLE `shift` ADD CONSTRAINT `shift_fk_shift_type_id` FOREIGN KEY (`shift_type_id`) REFERENCES `shift_type`(`id`);

ALTER TABLE `shift` ADD CONSTRAINT `shift_fk_driver_id` FOREIGN KEY (`driver_id`) REFERENCES `driver`(`id`);

ALTER TABLE `shift` ADD CONSTRAINT `shift_fk_vehicle_id` FOREIGN KEY (`vehicle_id`) REFERENCES `vehicle`(`id`);

ALTER TABLE `location` ADD CONSTRAINT `location_fk_shift_id` FOREIGN KEY (`shift_id`) REFERENCES `shift`(`id`);

